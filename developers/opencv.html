
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>OpenCV Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-richquotes/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-page-toc-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="pymavlink.html" />
    
    
    <link rel="prev" href="software-components.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Introduction</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../introduction/features.html">
            
                <a href="../introduction/features.html">
            
                    
                    Features
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../introduction/applications.html">
            
                <a href="../introduction/applications.html">
            
                    
                    Applications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../introduction/hardware-options.html">
            
                <a href="../introduction/hardware-options.html">
            
                    
                    Hardware Options
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../introduction/hardware-options/connection-diagrams.html">
            
                <a href="../introduction/hardware-options/connection-diagrams.html">
            
                    
                    Connection Diagrams
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../introduction/hardware-options/required-hardware.html">
            
                <a href="../introduction/hardware-options/required-hardware.html">
            
                    
                    Required Hardware
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../introduction/hardware-options/required-hardware/autopilot.html">
            
                <a href="../introduction/hardware-options/required-hardware/autopilot.html">
            
                    
                    Autopilot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../introduction/hardware-options/required-hardware/companion-computer.html">
            
                <a href="../introduction/hardware-options/required-hardware/companion-computer.html">
            
                    
                    Companion Computer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="../introduction/hardware-options/required-hardware/camera.html">
            
                <a href="../introduction/hardware-options/required-hardware/camera.html">
            
                    
                    Camera
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.4" data-path="../introduction/hardware-options/required-hardware/escs.html">
            
                <a href="../introduction/hardware-options/required-hardware/escs.html">
            
                    
                    Electronic Speed Controls (ESCs)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.5" data-path="../introduction/hardware-options/required-hardware/thrusters.html">
            
                <a href="../introduction/hardware-options/required-hardware/thrusters.html">
            
                    
                    Thrusters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.6" data-path="../introduction/hardware-options/required-hardware/power-sensing-module.html">
            
                <a href="../introduction/hardware-options/required-hardware/power-sensing-module.html">
            
                    
                    Power Sensing Module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.7" data-path="../introduction/hardware-options/required-hardware/power-supply.html">
            
                <a href="../introduction/hardware-options/required-hardware/power-supply.html">
            
                    
                    Power Supply
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.8" data-path="../introduction/hardware-options/required-hardware/tether.html">
            
                <a href="../introduction/hardware-options/required-hardware/tether.html">
            
                    
                    Tether
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.9" data-path="../introduction/hardware-options/required-hardware/topside-computer.html">
            
                <a href="../introduction/hardware-options/required-hardware/topside-computer.html">
            
                    
                    Topside Computer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.10" data-path="../introduction/hardware-options/required-hardware/joystick.html">
            
                <a href="../introduction/hardware-options/required-hardware/joystick.html">
            
                    
                    Joystick
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../introduction/hardware-options/recommended-extras.html">
            
                <a href="../introduction/hardware-options/recommended-extras.html">
            
                    
                    Recommended Extras
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="../introduction/hardware-options/recommended-extras/pressure-sensor.html">
            
                <a href="../introduction/hardware-options/recommended-extras/pressure-sensor.html">
            
                    
                    Pressure Sensor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="../introduction/hardware-options/recommended-extras/camera-gimbal.html">
            
                <a href="../introduction/hardware-options/recommended-extras/camera-gimbal.html">
            
                    
                    Camera Tilt Mount
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.3" data-path="../introduction/hardware-options/recommended-extras/lights.html">
            
                <a href="../introduction/hardware-options/recommended-extras/lights.html">
            
                    
                    Lights
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../introduction/hardware-options/additional-peripheral-devices.html">
            
                <a href="../introduction/hardware-options/additional-peripheral-devices.html">
            
                    
                    Additional Peripheral Devices
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="../introduction/hardware-options/additional-peripheral-devices/leak-sensor.html">
            
                <a href="../introduction/hardware-options/additional-peripheral-devices/leak-sensor.html">
            
                    
                    Leak Sensors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.2" data-path="../introduction/hardware-options/additional-peripheral-devices/temperature-sensor.html">
            
                <a href="../introduction/hardware-options/additional-peripheral-devices/temperature-sensor.html">
            
                    
                    Temperature Sensor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.3" data-path="../introduction/hardware-options/additional-peripheral-devices/servos.html">
            
                <a href="../introduction/hardware-options/additional-peripheral-devices/servos.html">
            
                    
                    Servos
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.4" data-path="../introduction/hardware-options/additional-peripheral-devices/relays.html">
            
                <a href="../introduction/hardware-options/additional-peripheral-devices/relays.html">
            
                    
                    Relays
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.5" data-path="../introduction/hardware-options/additional-peripheral-devices/grippers-and-manipulators.html">
            
                <a href="../introduction/hardware-options/additional-peripheral-devices/grippers-and-manipulators.html">
            
                    
                    Grippers and Manipulators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.6" data-path="../introduction/hardware-options/additional-peripheral-devices/underwater-positioning.html">
            
                <a href="../introduction/hardware-options/additional-peripheral-devices/underwater-positioning.html">
            
                    
                    Underwater Positioning and GPS (SBL and USBL)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.7" data-path="../introduction/hardware-options/additional-peripheral-devices/sonars.html">
            
                <a href="../introduction/hardware-options/additional-peripheral-devices/sonars.html">
            
                    
                    Sonars
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../introduction/required-software.html">
            
                <a href="../introduction/required-software.html">
            
                    
                    Required Software
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../introduction/required-software/ardusub-autopilot-firmware.html">
            
                <a href="../introduction/required-software/ardusub-autopilot-firmware.html">
            
                    
                    ArduSub Autopilot Firmware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../introduction/required-software/companion-computer-software.html">
            
                <a href="../introduction/required-software/companion-computer-software.html">
            
                    
                    Companion Computer Software
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../introduction/required-software/qgroundcontrol-software.html">
            
                <a href="../introduction/required-software/qgroundcontrol-software.html">
            
                    
                    QGroundControl Software
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Quick Start</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../quick-start/vehicle-frame.html">
            
                <a href="../quick-start/vehicle-frame.html">
            
                    
                    Building a Vehicle Frame
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../quick-start/installing-qgc.html">
            
                <a href="../quick-start/installing-qgc.html">
            
                    
                    Installing QGroundControl
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../quick-start/installing-companion.html">
            
                <a href="../quick-start/installing-companion.html">
            
                    
                    Installing Companion Software Image
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="../quick-start/installing-companion.html">
            
                <a href="../quick-start/installing-companion.html#network-setup">
            
                    
                    Network Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="../quick-start/installing-companion.html">
            
                <a href="../quick-start/installing-companion.html#software-update">
            
                    
                    Software Update
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../quick-start/installing-ardusub.html">
            
                <a href="../quick-start/installing-ardusub.html">
            
                    
                    Installing Autopilot Firmware
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="../quick-start/installing-ardusub.html">
            
                <a href="../quick-start/installing-ardusub.html#frame-selection">
            
                    
                    Frame Selection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.2" data-path="../quick-start/installing-ardusub.html">
            
                <a href="../quick-start/installing-ardusub.html#completing-calibrations">
            
                    
                    Completing Calibrations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.3" data-path="../quick-start/installing-ardusub.html">
            
                <a href="../quick-start/installing-ardusub.html#sd-card-formatting">
            
                    
                    Formatting the SD Card
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../quick-start/first-dive.html">
            
                <a href="../quick-start/first-dive.html">
            
                    
                    First Dive
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Reference Documentation</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../reference/qgc-configuration.html">
            
                <a href="../reference/qgc-configuration.html">
            
                    
                    QGroundControl
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../reference/qgroundcontrol/main-toolbar.html">
            
                <a href="../reference/qgroundcontrol/main-toolbar.html">
            
                    
                    Main Toolbar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../reference/qgroundcontrol/application-settings-view.html">
            
                <a href="../reference/qgroundcontrol/application-settings-view.html">
            
                    
                    Application Settings View
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../reference/qgroundcontrol/vehicle-setup-view.html">
            
                <a href="../reference/qgroundcontrol/vehicle-setup-view.html">
            
                    
                    Vehicle Setup View
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="../reference/qgroundcontrol/plan-view.html">
            
                <a href="../reference/qgroundcontrol/plan-view.html">
            
                    
                    Plan View
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="../reference/qgroundcontrol/fly-view.html">
            
                <a href="../reference/qgroundcontrol/fly-view.html">
            
                    
                    Fly View
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.5.1" data-path="../reference/qgroundcontrol/fly-view.html">
            
                <a href="../reference/qgroundcontrol/fly-view.html#video-stream">
            
                    
                    Recoding Video
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.6" data-path="../reference/qgroundcontrol/analyze-view.html">
            
                <a href="../reference/qgroundcontrol/analyze-view.html">
            
                    
                    Analyze View
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.7" data-path="../reference/qgroundcontrol/other-features.html">
            
                <a href="../reference/qgroundcontrol/other-features.html">
            
                    
                    Other Features
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.7.1" data-path="../reference/qgroundcontrol/other-features.html">
            
                <a href="../reference/qgroundcontrol/other-features.html#video-overlay">
            
                    
                    Telemetry Text Overlay Recording
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../reference/ardusub-configuration.html">
            
                <a href="../reference/ardusub-configuration.html">
            
                    
                    ArduSub
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../reference/qgroundcontrol/vehicle-setup-view.html">
            
                <a href="../reference/qgroundcontrol/vehicle-setup-view.html">
            
                    
                    Vehicle Setup View
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1.1" data-path="../reference/ardusub/summary-page.html">
            
                <a href="../reference/ardusub/summary-page.html">
            
                    
                    Summary Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.1.2" data-path="../reference/ardusub/joystick-setup-page.html">
            
                <a href="../reference/ardusub/joystick-setup-page.html">
            
                    
                    Joystick Setup Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.1.3" data-path="../reference/ardusub/sensors-setup-page.html">
            
                <a href="../reference/ardusub/sensors-setup-page.html">
            
                    
                    Sensors Setup Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.1.4" data-path="../reference/ardusub/power-setup-page.html">
            
                <a href="../reference/ardusub/power-setup-page.html">
            
                    
                    Power Setup Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.1.5" data-path="../reference/ardusub/motors-setup-page.html">
            
                <a href="../reference/ardusub/motors-setup-page.html">
            
                    
                    Motors Setup Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.1.6" data-path="../reference/ardusub/safety-setup-page.html">
            
                <a href="../reference/ardusub/safety-setup-page.html">
            
                    
                    Safety Setup Page (Failsafes)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.1.7" data-path="../reference/ardusub/tuning-setup-page.html">
            
                <a href="../reference/ardusub/tuning-setup-page.html">
            
                    
                    Tuning Setup Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.1.8" data-path="../reference/ardusub/camera-mount-setup-page.html">
            
                <a href="../reference/ardusub/camera-mount-setup-page.html">
            
                    
                    Camera Mount Setup Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.1.9" data-path="../reference/ardusub/lights-setup-page.html">
            
                <a href="../reference/ardusub/lights-setup-page.html">
            
                    
                    Lights Setup Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.1.10" data-path="../reference/ardusub/frame-setup-page.html">
            
                <a href="../reference/ardusub/frame-setup-page.html">
            
                    
                    Frame Setup Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.1.11" data-path="../reference/ardusub/parameters-page.html">
            
                <a href="../reference/ardusub/parameters-page.html">
            
                    
                    Parameters Page
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../reference/ardusub/features-while-in-operation.html">
            
                <a href="../reference/ardusub/features-while-in-operation.html">
            
                    
                    Features While in Operation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../reference/companion-web-ui.html">
            
                <a href="../reference/companion-web-ui.html">
            
                    
                    Companion Web Interface
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="../reference/companion/network.html">
            
                <a href="../reference/companion/network.html">
            
                    
                    Network
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2" data-path="../reference/companion/system.html">
            
                <a href="../reference/companion/system.html">
            
                    
                    System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.3" data-path="../reference/companion/camera.html">
            
                <a href="../reference/companion/camera.html">
            
                    
                    Camera
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.4" data-path="../reference/companion/routing.html">
            
                <a href="../reference/companion/routing.html">
            
                    
                    Routing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.5" data-path="../reference/companion/mavproxy.html">
            
                <a href="../reference/companion/mavproxy.html">
            
                    
                    MAVProxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.6" data-path="../reference/companion/git.html">
            
                <a href="../reference/companion/git.html">
            
                    
                    Git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.7" data-path="../reference/companion/waterlinked.html">
            
                <a href="../reference/companion/waterlinked.html">
            
                    
                    Water Linked
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.8" data-path="../reference/companion/terminal-over-browser.html">
            
                <a href="../reference/companion/terminal-over-browser.html">
            
                    
                    Terminal Over Browser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.9" data-path="../reference/companion/file-system.html">
            
                <a href="../reference/companion/file-system.html">
            
                    
                    File System Access
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.10" data-path="../reference/companion/mavlink-rest.html">
            
                <a href="../reference/companion/mavlink-rest.html">
            
                    
                    MAVLink REST API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../reference/data-logging.html">
            
                <a href="../reference/data-logging.html">
            
                    
                    Data Logging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../reference/troubleshooting.html">
            
                <a href="../reference/troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.5.1" data-path="../reference/troubleshooting.html">
            
                <span>
            
                    
                    Vehicle Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.2" data-path="../reference/troubleshooting.html">
            
                <span>
            
                    
                    No Telemetry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.3" data-path="../reference/troubleshooting.html">
            
                <span>
            
                    
                    No Video
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.4" data-path="../reference/troubleshooting.html">
            
                <span>
            
                    
                    Poor Video Streaming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.5" data-path="../reference/troubleshooting.html">
            
                <span>
            
                    
                    Miscellaneous
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Developers</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="rc-input-and-output.html">
            
                <a href="rc-input-and-output.html">
            
                    
                    RC Input and Output
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="full-parameter-list.html">
            
                <a href="full-parameter-list.html">
            
                    
                    Full Parameter List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="software-components.html">
            
                <a href="software-components.html">
            
                    
                    Software Components
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="4.4" data-path="opencv.html">
            
                <a href="opencv.html">
            
                    
                    OpenCV
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="pymavlink.html">
            
                <a href="pymavlink.html">
            
                    
                    Pymavlink
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="sitl.html">
            
                <a href="sitl.html">
            
                    
                    SITL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="gps-positioning.html">
            
                <a href="gps-positioning.html">
            
                    
                    GPS Positioning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="dvl-integration.html">
            
                <a href="dvl-integration.html">
            
                    
                    DVL Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.9" data-path="wireless-topside.html">
            
                <a href="wireless-topside.html">
            
                    
                    Wireless Topside
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.10" data-path="developers.html">
            
                <a href="developers.html">
            
                    
                    Build ArduSub
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.11" data-path="building-docs.html">
            
                <a href="building-docs.html">
            
                    
                    Build this Documentation
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Resources</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../resources/community.html">
            
                <a href="../resources/community.html">
            
                    
                    Community
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../resources/downloads.html">
            
                <a href="../resources/downloads.html">
            
                    
                    Downloads
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.1" data-path="../resources/downloads.html">
            
                <a href="../resources/downloads.html#qgroundcontrol">
            
                    
                    QGroundControl
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2.2" data-path="../resources/downloads.html">
            
                <a href="../resources/downloads.html#ardusub-firmware-files">
            
                    
                    ArduSub Firmware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2.3" data-path="../resources/downloads.html">
            
                <a href="../resources/downloads.html#companion-computer-images">
            
                    
                    Raspberry Pi Image
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../resources/further-reading.html">
            
                <a href="../resources/further-reading.html">
            
                    
                    Further Reading
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >OpenCV</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="opencv">OpenCV</h1>
<p>OpenCV (Open Source Computer Vision) is a library to help the development of computer vision software.
To perform any real-time image processing with the companion camera, we highly suggest OpenCV to do the job.</p>
<p>Take a look in the OpenCV <a href="https://opencv.org/" target="_blank">website</a> and <a href="https://docs.opencv.org/master/d9/df8/tutorial_root.html" target="_blank">tutorials</a> for further information.</p>
<h2 id="recommendation">Recommendation</h2>
<p>OpenCV support both Python 2 and Python 3, it&apos;s recommended to install it via your package manager.</p>
<h2 id="installation">Installation</h2>
<h4 id="ubuntu-2004">Ubuntu 20.04</h4>
<pre><code class="lang-sh"><span class="hljs-comment"># Update list of available packages</span>
sudo apt update

<span class="hljs-comment"># Install opencv and dependencies</span>
sudo apt install python3-numpy python3-opencv libopencv-dev

<span class="hljs-comment"># Install gstreamer and plugins</span>
sudo apt install python3-gst-1.0 gstreamer1.0-plugins-good gstreamer1.0-plugins-bad gstreamer1.0-libav
</code></pre>
<h3 id="companion">Companion</h3>
<pre><code class="lang-sh"><span class="hljs-comment"># Update list of available packages</span>
sudo apt update

<span class="hljs-comment"># Install opencv and dependencies</span>
sudo apt install python-numpy python-opencv libopencv-dev

<span class="hljs-comment"># Install gstreamer and plugins</span>
sudo apt install python-gst-1.0 gstreamer1.0-plugins-good \
    gstreamer1.0-plugins-bad gstreamer1.0-libav \
    gir1.2-gst-plugins-base-1.0 gir1.2-gstreamer-1.0
</code></pre>
<h1 id="examples">Examples</h1>
<p>Take a look in the <a href="software-components.html">diagram of the software components</a> to see how the communication between all the modules work.</p>
<p>The video raw data goes to gstreamer that send it via udp (:5600) inside the companion board to the topside computer.</p>
<h3 id="top-side-computer">Top side computer</h3>
<p>To capture video stream with the python script and QGC at same time, it&apos;s necessary to modify <a href="http://192.168.2.2:2770/camera" target="_blank">gstreamer options</a>, changing <code>! udpsink host=192.168.2.1 port=5600</code> to <code>! multiudpsink clients=192.168.2.1:5600,192.168.2.1:4777</code> and add the new <code>port</code> parameter when calling <code>Video</code> (<code>video = Video(port=4777)</code>).</p>
<h4 id="receive-and-display-stream">Receive and display stream</h4>
<h5 id="python">Python</h5>
<pre><code class="lang-py"><span class="hljs-comment">#!/usr/bin/env python</span>
<span class="hljs-string">&quot;&quot;&quot;
BlueRov video capture class
&quot;&quot;&quot;</span>

<span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> gi
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

gi.require_version(<span class="hljs-string">&apos;Gst&apos;</span>, <span class="hljs-string">&apos;1.0&apos;</span>)
<span class="hljs-keyword">from</span> gi.repository <span class="hljs-keyword">import</span> Gst


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Video</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-string">&quot;&quot;&quot;BlueRov video capture class constructor

    Attributes:
        port (int): Video UDP port
        video_codec (string): Source h264 parser
        video_decode (string): Transform YUV (12bits) to BGR (24bits)
        video_pipe (object): GStreamer top-level pipeline
        video_sink (object): Gstreamer sink element
        video_sink_conf (string): Sink configuration
        video_source (string): Udp source ip and port
        latest_frame (np.ndarray): Latest retrieved video frame
    &quot;&quot;&quot;</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, port=<span class="hljs-number">5600</span>)</span>:</span>
        <span class="hljs-string">&quot;&quot;&quot;Summary

        Args:
            port (int, optional): UDP port
        &quot;&quot;&quot;</span>

        Gst.init(<span class="hljs-keyword">None</span>)

        self.port = port
        self.latest_frame = self._new_frame = <span class="hljs-keyword">None</span>

        <span class="hljs-comment"># [Software component diagram](https://www.ardusub.com/software/components.html)</span>
        <span class="hljs-comment"># UDP video stream (:5600)</span>
        self.video_source = <span class="hljs-string">&apos;udpsrc port={}&apos;</span>.format(self.port)
        <span class="hljs-comment"># [Rasp raw image](http://picamera.readthedocs.io/en/release-0.7/recipes2.html#raw-image-capture-yuv-format)</span>
        <span class="hljs-comment"># Cam -&gt; CSI-2 -&gt; H264 Raw (YUV 4-4-4 (12bits) I420)</span>
        self.video_codec = <span class="hljs-string">&apos;! application/x-rtp, payload=96 ! rtph264depay ! h264parse ! avdec_h264&apos;</span>
        <span class="hljs-comment"># Python don&apos;t have nibble, convert YUV nibbles (4-4-4) to OpenCV standard BGR bytes (8-8-8)</span>
        self.video_decode = \
            <span class="hljs-string">&apos;! decodebin ! videoconvert ! video/x-raw,format=(string)BGR ! videoconvert&apos;</span>
        <span class="hljs-comment"># Create a sink to get data</span>
        self.video_sink_conf = \
            <span class="hljs-string">&apos;! appsink emit-signals=true sync=false max-buffers=2 drop=true&apos;</span>

        self.video_pipe = <span class="hljs-keyword">None</span>
        self.video_sink = <span class="hljs-keyword">None</span>

        self.run()

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">start_gst</span><span class="hljs-params">(self, config=None)</span>:</span>
        <span class="hljs-string">&quot;&quot;&quot; Start gstreamer pipeline and sink
        Pipeline description list e.g:
            [
                &apos;videotestsrc ! decodebin&apos;, \
                &apos;! videoconvert ! video/x-raw,format=(string)BGR ! videoconvert&apos;,
                &apos;! appsink&apos;
            ]

        Args:
            config (list, optional): Gstreamer pileline description list
        &quot;&quot;&quot;</span>

        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> config:
            config = \
                [
                    <span class="hljs-string">&apos;videotestsrc ! decodebin&apos;</span>,
                    <span class="hljs-string">&apos;! videoconvert ! video/x-raw,format=(string)BGR ! videoconvert&apos;</span>,
                    <span class="hljs-string">&apos;! appsink&apos;</span>
                ]

        command = <span class="hljs-string">&apos; &apos;</span>.join(config)
        self.video_pipe = Gst.parse_launch(command)
        self.video_pipe.set_state(Gst.State.PLAYING)
        self.video_sink = self.video_pipe.get_by_name(<span class="hljs-string">&apos;appsink0&apos;</span>)

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">gst_to_opencv</span><span class="hljs-params">(sample)</span>:</span>
        <span class="hljs-string">&quot;&quot;&quot;Transform byte array into np array

        Args:
            sample (TYPE): Description

        Returns:
            TYPE: Description
        &quot;&quot;&quot;</span>
        buf = sample.get_buffer()
        caps_structure = sample.get_caps().get_structure(<span class="hljs-number">0</span>)
        array = np.ndarray(
            (
                caps_structure.get_value(<span class="hljs-string">&apos;height&apos;</span>),
                caps_structure.get_value(<span class="hljs-string">&apos;width&apos;</span>),
                <span class="hljs-number">3</span>
            ),
            buffer=buf.extract_dup(<span class="hljs-number">0</span>, buf.get_size()), dtype=np.uint8)
        <span class="hljs-keyword">return</span> array

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">frame</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-string">&quot;&quot;&quot; Get Frame

        Returns:
            np.ndarray: latest retrieved image frame
        &quot;&quot;&quot;</span>
        <span class="hljs-keyword">if</span> self.frame_available:
            self.latest_frame = self._new_frame
            <span class="hljs-comment"># reset to indicate latest frame has been &apos;consumed&apos;</span>
            self._new_frame = <span class="hljs-keyword">None</span>
        <span class="hljs-keyword">return</span> self.latest_frame

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">frame_available</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-string">&quot;&quot;&quot;Check if a new frame is available

        Returns:
            bool: true if a new frame is available
        &quot;&quot;&quot;</span>
        <span class="hljs-keyword">return</span> self._new_frame <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">None</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-string">&quot;&quot;&quot; Get frame to update _new_frame
        &quot;&quot;&quot;</span>

        self.start_gst(
            [
                self.video_source,
                self.video_codec,
                self.video_decode,
                self.video_sink_conf
            ])

        self.video_sink.connect(<span class="hljs-string">&apos;new-sample&apos;</span>, self.callback)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">callback</span><span class="hljs-params">(self, sink)</span>:</span>
        sample = sink.emit(<span class="hljs-string">&apos;pull-sample&apos;</span>)
        self._new_frame = self.gst_to_opencv(sample)

        <span class="hljs-keyword">return</span> Gst.FlowReturn.OK


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&apos;__main__&apos;</span>:
    <span class="hljs-comment"># Create the video object</span>
    <span class="hljs-comment"># Add port= if is necessary to use a different one</span>
    video = Video()

    print(<span class="hljs-string">&apos;Initialising stream...&apos;</span>)
    waited = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> video.frame_available():
        waited += <span class="hljs-number">1</span>
        print(<span class="hljs-string">&apos;\r  Frame not available (x{})&apos;</span>.format(waited), end=<span class="hljs-string">&apos;&apos;</span>)
        cv2.waitKey(<span class="hljs-number">30</span>)
    print(<span class="hljs-string">&apos;\nSuccess!\nStarting streaming - press &quot;q&quot; to quit.&apos;</span>)

    <span class="hljs-keyword">while</span> <span class="hljs-keyword">True</span>:
        <span class="hljs-comment"># Wait for the next frame to become available</span>
        <span class="hljs-keyword">if</span> video.frame_available():
            <span class="hljs-comment"># Only retrieve and display a frame if it&apos;s new</span>
            frame = video.frame()
            cv2.imshow(<span class="hljs-string">&apos;frame&apos;</span>, frame)
        <span class="hljs-comment"># Allow frame to display, and check if user wants to quit</span>
        <span class="hljs-keyword">if</span> cv2.waitKey(<span class="hljs-number">1</span>) &amp; <span class="hljs-number">0xFF</span> == ord(<span class="hljs-string">&apos;q&apos;</span>):
            <span class="hljs-keyword">break</span>
</code></pre>
<h5 id="c">C++</h5>
<pre><code class="lang-cpp"><span class="hljs-comment">/**
 * BlueRov video capture example
 * Based on:
 * https://stackoverflow.com/questions/10403588/adding-opencv-processing-to-gstreamer-application
 */</span>

<span class="hljs-comment">// Include atomic std library</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;atomic&gt;</span></span>

<span class="hljs-comment">// Include gstreamer library</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;gst/gst.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;gst/app/app.h&gt;</span></span>

<span class="hljs-comment">// Include OpenCV library</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;opencv.hpp&gt;</span></span>

<span class="hljs-comment">// Share frame between main loop and gstreamer callback</span>
<span class="hljs-built_in">std</span>::atomic&lt;cv::Mat*&gt; atomicFrame;

<span class="hljs-comment">/**
 * @brief Check preroll to get a new frame using callback
 *  https://gstreamer.freedesktop.org/documentation/design/preroll.html
 * @return GstFlowReturn
 */</span>
<span class="hljs-function">GstFlowReturn <span class="hljs-title">new_preroll</span><span class="hljs-params">(GstAppSink* <span class="hljs-comment">/*appsink*/</span>, gpointer <span class="hljs-comment">/*data*/</span>)</span>
</span>{
    <span class="hljs-keyword">return</span> GST_FLOW_OK;
}

<span class="hljs-comment">/**
 * @brief This is a callback that get a new frame when a preroll exist
 *
 * @param appsink
 * @return GstFlowReturn
 */</span>
<span class="hljs-function">GstFlowReturn <span class="hljs-title">new_sample</span><span class="hljs-params">(GstAppSink *appsink, gpointer <span class="hljs-comment">/*data*/</span>)</span>
</span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> framecount = <span class="hljs-number">0</span>;

    <span class="hljs-comment">// Get caps and frame</span>
    GstSample *sample = gst_app_sink_pull_sample(appsink);
    GstCaps *caps = gst_sample_get_caps(sample);
    GstBuffer *buffer = gst_sample_get_buffer(sample);
    GstStructure *structure = gst_caps_get_structure(caps, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> width = g_value_get_int(gst_structure_get_value(structure, <span class="hljs-string">&quot;width&quot;</span>));
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> height = g_value_get_int(gst_structure_get_value(structure, <span class="hljs-string">&quot;height&quot;</span>));

    <span class="hljs-comment">// Print dot every 30 frames</span>
    <span class="hljs-keyword">if</span>(!(framecount%<span class="hljs-number">30</span>)) {
        g_print(<span class="hljs-string">&quot;.&quot;</span>);
    }

    <span class="hljs-comment">// Show caps on first frame</span>
    <span class="hljs-keyword">if</span>(!framecount) {
        g_print(<span class="hljs-string">&quot;caps: %s\n&quot;</span>, gst_caps_to_string(caps));
    }
    framecount++;

    <span class="hljs-comment">// Get frame data</span>
    GstMapInfo <span class="hljs-built_in">map</span>;
    gst_buffer_map(buffer, &amp;<span class="hljs-built_in">map</span>, GST_MAP_READ);

    <span class="hljs-comment">// Convert gstreamer data to OpenCV Mat</span>
    cv::Mat* prevFrame;
    prevFrame = atomicFrame.exchange(<span class="hljs-keyword">new</span> cv::Mat(cv::Size(width, height), CV_8UC3, (<span class="hljs-keyword">char</span>*)<span class="hljs-built_in">map</span>.data, cv::Mat::AUTO_STEP));
    <span class="hljs-keyword">if</span>(prevFrame) {
        <span class="hljs-keyword">delete</span> prevFrame;
    }

    gst_buffer_unmap(buffer, &amp;<span class="hljs-built_in">map</span>);
    gst_sample_unref(sample);

    <span class="hljs-keyword">return</span> GST_FLOW_OK;
}

<span class="hljs-comment">/**
 * @brief Bus callback
 *  Print important messages
 *
 * @param bus
 * @param message
 * @param data
 * @return gboolean
 */</span>
<span class="hljs-function"><span class="hljs-keyword">static</span> gboolean <span class="hljs-title">my_bus_callback</span><span class="hljs-params">(GstBus *bus, GstMessage *message, gpointer data)</span>
</span>{
    <span class="hljs-comment">// Debug message</span>
    <span class="hljs-comment">//g_print(&quot;Got %s message\n&quot;, GST_MESSAGE_TYPE_NAME(message));</span>
    <span class="hljs-keyword">switch</span>(GST_MESSAGE_TYPE(message)) {
        <span class="hljs-keyword">case</span> GST_MESSAGE_ERROR: {
            GError *err;
            gchar *debug;

            gst_message_parse_error(message, &amp;err, &amp;debug);
            g_print(<span class="hljs-string">&quot;Error: %s\n&quot;</span>, err-&gt;message);
            g_error_free(err);
            g_free(debug);
            <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> GST_MESSAGE_EOS:
            <span class="hljs-comment">/* end-of-stream */</span>
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            <span class="hljs-comment">/* unhandled message */</span>
            <span class="hljs-keyword">break</span>;
    }
    <span class="hljs-comment">/* we want to be notified again the next time there is a message
     * on the bus, so returning TRUE (FALSE means we want to stop watching
     * for messages on the bus and our callback should not be called again)
     */</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span> </span>{
    gst_init(&amp;argc, &amp;argv);

    gchar *descr = g_strdup(
        <span class="hljs-string">&quot;udpsrc port=5600 &quot;</span>
        <span class="hljs-string">&quot;! application/x-rtp, payload=96 ! rtph264depay ! h264parse ! avdec_h264 &quot;</span>
        <span class="hljs-string">&quot;! decodebin ! videoconvert ! video/x-raw,format=(string)BGR ! videoconvert &quot;</span>
        <span class="hljs-string">&quot;! appsink name=sink emit-signals=true sync=false max-buffers=1 drop=true&quot;</span>
    );

    <span class="hljs-comment">// Check pipeline</span>
    GError *error = <span class="hljs-literal">nullptr</span>;
    GstElement *pipeline = gst_parse_launch(descr, &amp;error);

    <span class="hljs-keyword">if</span>(error) {
        g_print(<span class="hljs-string">&quot;could not construct pipeline: %s\n&quot;</span>, error-&gt;message);
        g_error_free(error);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">-1</span>);
    }

    <span class="hljs-comment">// Get sink</span>
    GstElement *sink = gst_bin_get_by_name(GST_BIN(pipeline), <span class="hljs-string">&quot;sink&quot;</span>);

    <span class="hljs-comment">/**
     * @brief Get sink signals and check for a preroll
     *  If preroll exists, we do have a new frame
     */</span>
    gst_app_sink_set_emit_signals((GstAppSink*)sink, <span class="hljs-literal">true</span>);
    gst_app_sink_set_drop((GstAppSink*)sink, <span class="hljs-literal">true</span>);
    gst_app_sink_set_max_buffers((GstAppSink*)sink, <span class="hljs-number">1</span>);
    GstAppSinkCallbacks callbacks = { <span class="hljs-literal">nullptr</span>, new_preroll, new_sample };
    gst_app_sink_set_callbacks(GST_APP_SINK(sink), &amp;callbacks, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>);

    <span class="hljs-comment">// Declare bus</span>
    GstBus *bus;
    bus = gst_pipeline_get_bus(GST_PIPELINE(pipeline));
    gst_bus_add_watch(bus, my_bus_callback, <span class="hljs-literal">nullptr</span>);
    gst_object_unref(bus);

    gst_element_set_state(GST_ELEMENT(pipeline), GST_STATE_PLAYING);

    <span class="hljs-comment">// Main loop</span>
    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) {
        g_main_iteration(<span class="hljs-literal">false</span>);

        cv::Mat* frame = atomicFrame.load();
        <span class="hljs-keyword">if</span>(frame) {
            cv::imshow(<span class="hljs-string">&quot;Frame&quot;</span>, atomicFrame.load()[<span class="hljs-number">0</span>]);
            cv::waitKey(<span class="hljs-number">30</span>);
        }
    }

    gst_element_set_state(GST_ELEMENT(pipeline), GST_STATE_NULL);
    gst_object_unref(GST_OBJECT(pipeline));
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3 id="companion">Companion</h3>
<p>Before running any program in the companion board, keep in mind that the hardware of a SBC may not run with high performance or with real-time requirements.</p>
<p>It&apos;s possible to get some frames while the stream is in progress, however this can result in some delays in the top side computer.</p>
<h4 id="get-a-frame-and-save-it">Get a frame and save it</h4>
<pre><code class="lang-py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> cv2

cap = cv2.VideoCapture(<span class="hljs-number">0</span>)

<span class="hljs-comment"># Capture frame-by-frame</span>
ret, frame = cap.read()

<span class="hljs-comment"># Save the frame</span>
cv2.imwrite(<span class="hljs-string">&apos;frame.png&apos;</span>, frame)

<span class="hljs-comment"># When everything done, release the capture</span>
cap.release()
</code></pre>
<h4 id="get-a-frame-from-gstreamer-and-save-it">Get a frame from gstreamer and save it</h4>
<p>Update the gstreamer options to enable multiudpsink like in <strong>Top side computer</strong>, but changing the ip
of the second output to 192.168.2.2.</p>
<pre><code class="lang-py"><span class="hljs-comment"># Add or use the Video class here</span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&apos;__main__&apos;</span>:
    <span class="hljs-comment"># Create the video object</span>
    <span class="hljs-comment"># Add port= if is necessary to use a different one</span>
    video = Video(port=<span class="hljs-number">4777</span>)

    <span class="hljs-comment"># Wait for the next frame</span>
    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> video.frame_available():
        <span class="hljs-keyword">continue</span>

    frame = video.frame()
    <span class="hljs-comment"># Save the frame</span>
    cv2.imwrite(<span class="hljs-string">&apos;frame.png&apos;</span>, frame)
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="software-components.html" class="navigation navigation-prev " aria-label="Previous page: Software Components">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="pymavlink.html" class="navigation navigation-next " aria-label="Next page: Pymavlink">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"OpenCV","level":"4.4","depth":1,"next":{"title":"Pymavlink","level":"4.5","depth":1,"path":"developers/pymavlink.md","ref":"developers/pymavlink.md","articles":[]},"previous":{"title":"Software Components","level":"4.3","depth":1,"path":"developers/software-components.md","ref":"developers/software-components.md","articles":[]},"dir":"ltr"},"config":{"gitbook":">= 3.2.2","theme":"default","variables":{},"plugins":["youtube","richquotes","page-toc-button","collapsible-menu","custom-favicon","toolbar@git+https://github.com/hamishwillee/gitbook-plugin-toolbar.git","-validate-links","include-codeblock"],"pluginsConfig":{"collapsible-menu":{},"youtube":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"richquotes":{"tip":{"alert":"success","picto":"fa-thumbs-o-up"},"aerial":{"alert":"warning","picto":"fa-plane"},"gps":{"alert":"info","picto":"fa-map-marker"},"version":{"alert":"info","picto":"fa fa-refresh fa-spin fa-3x fa-fw"}},"highlight":{},"favicon":"favicon.ico","page-toc-button":{},"custom-favicon":{},"toolbar":{"buttons":[{"label":"Bug tracker","icon":"fa fa-bug","position":"left","url":"https://github.com/bluerobotics/ardusub-gitbook/issues/new?title=Doc+Bug:+{{title}}&body=DESCRIBE+PROBLEM+WITH+DOCS+HERE%0A%0ABug+Page:+[{{title}}]({{url}})"},{"label":"GitHub","icon":"fa fa-github","url":"https://github.com/Ardupilot/ardupilot"},{"label":"Edit page on github","icon":"fa fa-pencil-square-o","position":"left","url":"https://github.com/bluerobotics/ardusub-gitbook/edit/master/{{filepath_lang}}"}]},"include-codeblock":{"check":false,"edit":false,"fixlang":false,"lang":"","template":"default","theme":"chrome","unindent":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"developers/opencv.md","mtime":"2024-09-12T14:50:33.456Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2024-09-12T14:51:52.598Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-toolbar/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

